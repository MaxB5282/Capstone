<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Maxwell Bilyk">

<title>Navigating the Complexities of U.S. Migration</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="blog_files/libs/clipboard/clipboard.min.js"></script>
<script src="blog_files/libs/quarto-html/quarto.js"></script>
<script src="blog_files/libs/quarto-html/popper.min.js"></script>
<script src="blog_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="blog_files/libs/quarto-html/anchor.min.js"></script>
<link href="blog_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="blog_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="blog_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="blog_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="blog_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.12.1.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>



</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-data" id="toc-the-data" class="nav-link active" data-scroll-target="#the-data">The Data</a></li>
  <li><a href="#data-preprocessing" id="toc-data-preprocessing" class="nav-link" data-scroll-target="#data-preprocessing">Data Preprocessing</a></li>
  <li><a href="#questions-and-results" id="toc-questions-and-results" class="nav-link" data-scroll-target="#questions-and-results">Questions and Results</a>
  <ul class="collapse">
  <li><a href="#analyzing-annual-green-card-admissions" id="toc-analyzing-annual-green-card-admissions" class="nav-link" data-scroll-target="#analyzing-annual-green-card-admissions">Analyzing annual green card admissions</a></li>
  <li><a href="#immigration-trends" id="toc-immigration-trends" class="nav-link" data-scroll-target="#immigration-trends">Immigration Trends</a></li>
  <li><a href="#analyzing-refugee-statistics" id="toc-analyzing-refugee-statistics" class="nav-link" data-scroll-target="#analyzing-refugee-statistics">Analyzing Refugee Statistics</a></li>
  <li><a href="#estimated-illegal-immigrant-numbers-and-their-distribution" id="toc-estimated-illegal-immigrant-numbers-and-their-distribution" class="nav-link" data-scroll-target="#estimated-illegal-immigrant-numbers-and-their-distribution">Estimated Illegal Immigrant Numbers and Their Distribution</a></li>
  <li><a href="#unaccompanied-children-statistics" id="toc-unaccompanied-children-statistics" class="nav-link" data-scroll-target="#unaccompanied-children-statistics">Unaccompanied Children Statistics</a></li>
  <li><a href="#educational-attainment-statistics" id="toc-educational-attainment-statistics" class="nav-link" data-scroll-target="#educational-attainment-statistics">Educational Attainment Statistics</a></li>
  </ul></li>
  <li><a href="#future-work" id="toc-future-work" class="nav-link" data-scroll-target="#future-work">Future Work</a></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="..\..\blog.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Navigating the Complexities of U.S. Migration</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">Spring 2024</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Maxwell Bilyk </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://imageio.forbes.com/specials-images/imageserve/1132026265/Illustration-of-USA-immigration/0x0.jpg?format=jpg&amp;crop=8176,4013,x0,y391,safe&amp;width=1440" class="img-fluid figure-img" alt="U.S. flag with migrants"></p>
<figcaption class="figure-caption">Source: Forbes</figcaption>
</figure>
</div>
<p>My inspiration for this research came from my own discomfort with being naive to the subject of immigration in my own country. All I hear about on the news is immigration. Some news channels tell me that it is ruining our country and we need to close the borders. Other sources tell me that we aren’t doing enough as a country to support immigrants and that they could really beneift our country if we allocated resources correctly to integrate them smoothly into our society.</p>
<p>I wanted to be able to make my own conclusions, or atleast better understand this domain, so I sought out concrete data pertaining to U.S. immigration, and began my analysis.</p>
<p>This project aims to uncover the patterns of immigration over time, observe areas where immigrants are residing, and highlight disparities between the educational attainment of immigrants based on their country of origin.</p>
<p>The findings from this project could potentially be used by U.S. policymakers to help them make more informed decisions regarding U.S. immigration.</p>
<section id="the-data" class="level1">
<h1>The Data</h1>
<p>The data used for this project comes from <a href="https://www.migrationpolicy.org/programs/data-hub/us-immigration-trends?gad_source=1&amp;gclid=CjwKCAiAivGuBhBEEiwAWiFmYbxFPH7H1xkFCmwWRPyeHY8k87cMI-NkOL9lygAPqFa7ppdZx1vOxxoC88YQAvD_BwE">The Nonpartisan Migration Policy Institute</a>. This orginization is an independent group that seeks to improve immigration and integration policies in the U.S. through research and analysis of data.</p>
<p>This was the perfect source of data for me. Through my background research I found so many biased and unproffesional sources that were publishing immigration data, and I did not want to include their data in my project.</p>
<p>In total, I worked with six datasets…</p>
<ul>
<li>Legal Immigrants
<ul>
<li>A dataset that has the annual number of new legal permanent residents by country of birth.**</li>
</ul></li>
<li>Distribution of Legal Immigrants by State
<ul>
<li>A dataset that holds information on the immigrant population by state.</li>
</ul></li>
<li>Annual Refugees
<ul>
<li>A dataset that holds information on U.S. annual refugee resettlement ceiling and annual number of admitted refugees from the years 1975-2024.</li>
</ul></li>
<li>Illegal Immigrant Estimates
<ul>
<li>A dataset that holds information on the National and State estimates of the unnathorized immigrant population from 2015 to 2019 (totals, not year over year).</li>
</ul></li>
<li>Unacompanied Children
<ul>
<li>A dataset that holds information on the number of unaccompanied children released to sponsors by state from fiscal years 2014-2023.</li>
</ul></li>
<li>Educational Attainment of Immigrants in the U.S.
<ul>
<li>A dataset that holds information on the educational attainment of recently arrived immigrants (ages 25 and over) by country of birth as of 2022.</li>
</ul></li>
</ul>
</section>
<section id="data-preprocessing" class="level1">
<h1>Data Preprocessing</h1>
<p>Feel free to skip this section if it is not of interest to you. It conatins information on data cleaning and the code block contains all imports needed for the analysis and the code cleaning the datasets.</p>
<p>The datasets were all brought in from excel spreadsheets so a lot of them had column names with spaces that had to be cleaned. Furthermore, a lot of values contained percentage symbols which also had to be remobved and those same values needed their data types to be changed in order to conduct analysis with them.</p>
<p>If you just want to look at the numbers and read through them. The best thing to do is go through my github repository where this website stems from and to read them through excel. However to conduct any sort of analysis with python or another programming language, cleaning the datasets in these ways is necessary.</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.figure_factory <span class="im">as</span> ff</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.ticker <span class="im">import</span> FuncFormatter</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pycountry_convert <span class="im">as</span> pc</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>education <span class="op">=</span> pd.read_csv(<span class="st">'educational_attainment - Sheet1.csv'</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_percent(df, columns):</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> column <span class="kw">in</span> columns:</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        df[column] <span class="op">=</span> df[column].<span class="bu">str</span>.replace(<span class="st">'%'</span>, <span class="st">''</span>).astype(<span class="bu">float</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># List of columns to remove '%' from</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>columns_to_remove_percent <span class="op">=</span> [<span class="st">'Less than 9th Grade'</span>, <span class="st">'9th-12th Grade'</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>       <span class="st">'High School Diploma or Equivalent'</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Some College or Associate's Degree"</span>, <span class="st">"Bachelor's Degree or Higher"</span>]</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>df_cleaned <span class="op">=</span> remove_percent(education.copy(), columns_to_remove_percent)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>children <span class="op">=</span> pd.read_csv(<span class="st">"Unnacompanied_children - Sheet1.csv"</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>refugees <span class="op">=</span> pd.read_csv(<span class="st">"Refugge_resettlement - Sheet1.csv"</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>immigrant_state <span class="op">=</span> pd.read_csv(<span class="st">"Immigrant_pop_state - Sheet1.csv"</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>immigrant_state[<span class="st">'Immigrant Share of Total State Population'</span>] <span class="op">=</span> immigrant_state[<span class="st">'Immigrant Share of Total State Population'</span>].<span class="bu">str</span>.replace(<span class="st">'%'</span>,<span class="st">''</span>).astype(<span class="bu">float</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>legal_country <span class="op">=</span> pd.read_csv(<span class="st">"new_legals_country - Sheet1.csv"</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates <span class="op">=</span> pd.read_csv(<span class="st">"Unauthorized_estimates - Sheet1.csv"</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>] <span class="op">=</span> unauthorized_estimates[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>].<span class="bu">str</span>.replace(<span class="st">'%'</span>,<span class="st">''</span>).astype(<span class="bu">float</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="questions-and-results" class="level1">
<h1>Questions and Results</h1>
<section id="analyzing-annual-green-card-admissions" class="level2">
<h2 class="anchored" data-anchor-id="analyzing-annual-green-card-admissions">Analyzing annual green card admissions</h2>
<p>How many green cards are issued annually and to what countries are most of the green cards issued to? I plan to answer this question by pulling the first dataset, and then creating a line plot of the total amount of green cards issued year over year to analyze the pattern. Then I will total all the countries over all the given years.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>legal_country_clean <span class="op">=</span> legal_country.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>legal_country_clean.rename(columns<span class="op">=</span> {<span class="st">'Region/Sub-Region or Country of Birth'</span>:<span class="st">'Country'</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'1999'</span>, <span class="st">'2000'</span>, <span class="st">'2001'</span>, <span class="st">'2002'</span>, <span class="st">'2003'</span>, <span class="st">'2004'</span>, <span class="st">'2005'</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2006'</span>, <span class="st">'2007'</span>, <span class="st">'2008'</span>, <span class="st">'2009'</span>, <span class="st">'2010'</span>, <span class="st">'2011'</span>, <span class="st">'2012'</span>, <span class="st">'2013'</span>, <span class="st">'2014'</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2015'</span>, <span class="st">'2016'</span>, <span class="st">'2017'</span>, <span class="st">'2018'</span>, <span class="st">'2019'</span>, <span class="st">'2020'</span>, <span class="st">'2021'</span>, <span class="st">'2022'</span>]</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>legal_country_clean[cols] <span class="op">=</span> legal_country_clean[cols].<span class="bu">apply</span>(pd.to_numeric, errors<span class="op">=</span><span class="st">'coerce'</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>grouped_legal <span class="op">=</span> pd.melt(legal_country_clean, id_vars<span class="op">=</span>[<span class="st">'Country'</span>], value_vars<span class="op">=</span>[<span class="st">'1999'</span>, <span class="st">'2000'</span>, <span class="st">'2001'</span>, <span class="st">'2002'</span>, <span class="st">'2003'</span>, <span class="st">'2004'</span>, <span class="st">'2005'</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2006'</span>, <span class="st">'2007'</span>, <span class="st">'2008'</span>, <span class="st">'2009'</span>, <span class="st">'2010'</span>, <span class="st">'2011'</span>, <span class="st">'2012'</span>, <span class="st">'2013'</span>, <span class="st">'2014'</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2015'</span>, <span class="st">'2016'</span>, <span class="st">'2017'</span>, <span class="st">'2018'</span>, <span class="st">'2019'</span>, <span class="st">'2020'</span>, <span class="st">'2021'</span>, <span class="st">'2022'</span>])</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>val_to_drop <span class="op">=</span> <span class="st">'All Countries (total)'</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>grouped_legal_plot <span class="op">=</span> grouped_legal[grouped_legal[<span class="st">'Country'</span>] <span class="op">!=</span> val_to_drop]</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> (grouped_legal[<span class="st">'Country'</span>] <span class="op">==</span> <span class="st">'All Countries (total)'</span>)<span class="op">;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>group_plot <span class="op">=</span> grouped_legal[mask]<span class="op">;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>sns.lineplot(group_plot, x<span class="op">=</span><span class="st">'variable'</span>, y<span class="op">=</span><span class="st">'value'</span>).<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">'Year'</span>, ylabel<span class="op">=</span><span class="st">'Number of Green Cards Issued'</span>)<span class="op">;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"white"</span>, palette<span class="op">=</span><span class="st">"mako_r"</span>, rc<span class="op">=</span>{<span class="st">"lines.linewidth"</span>: <span class="fl">2.5</span>})</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_locator(plt.MultipleLocator(<span class="dv">5</span>))</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Max\AppData\Local\Temp\ipykernel_23480\780057520.py:1: FutureWarning:

DataFrame.applymap has been deprecated. Use DataFrame.map instead.

C:\Users\Max\anaconda3\envs\capstone\Lib\site-packages\seaborn\_oldcore.py:1119: FutureWarning:

use_inf_as_na option is deprecated and will be removed in a future version. Convert inf values to NaN before operating instead.

C:\Users\Max\anaconda3\envs\capstone\Lib\site-packages\seaborn\_oldcore.py:1119: FutureWarning:

use_inf_as_na option is deprecated and will be removed in a future version. Convert inf values to NaN before operating instead.
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig1-output-2.png" width="585" height="458" class="figure-img"></p>
<figcaption class="figure-caption">Number of Green Cards Admitted by U.S. 1999-2022</figcaption>
</figure>
</div>
</div>
</div>
<p>Analyzing this figure, we can see that the number of green cards issued hit a low after 2001, and then spikes until about 2007. After that, there is a steady decrease in the number of green cards issued until 2020, where there has been an increase till present day.</p>
<p>Some possible explanations for these patterns can be the terrorist attack of 9/11 leading to a much more strict border control. Also, president Biden’s election into office in 2021 explains the increases we are seeing now. His campaign spoke a lot about letting more immigrants into the country and it is apparent that he and his administration have been keeping their promises.</p>
<p>The vast majority of these green cards were issued to individuals residing in the Americas as well as Asia. (Not shown in figure)</p>
</section>
<section id="immigration-trends" class="level2">
<h2 class="anchored" data-anchor-id="immigration-trends">Immigration Trends</h2>
<p>What are the trends of state immigration? For this question, I will build a chloropleth where the color of each state will correspond with the state’s immigrant share of total state population in 2022.</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>state_pivot <span class="op">=</span> pd.pivot_table(immigrant_state, values<span class="op">=</span><span class="st">'Immigrant Share of Total State Population'</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                             index<span class="op">=</span><span class="st">'Country'</span>, aggfunc<span class="op">=</span><span class="st">'mean'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>state_from_pivot <span class="op">=</span> state_pivot.reset_index()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>state_from_pivot.rename(columns<span class="op">=</span>{<span class="st">'Country'</span>:<span class="st">'State'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>code <span class="op">=</span> {<span class="st">'Alabama'</span>: <span class="st">'AL'</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Alaska'</span>: <span class="st">'AK'</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Arizona'</span>: <span class="st">'AZ'</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Arkansas'</span>: <span class="st">'AR'</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'California'</span>: <span class="st">'CA'</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Colorado'</span>: <span class="st">'CO'</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Connecticut'</span>: <span class="st">'CT'</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Delaware'</span>: <span class="st">'DE'</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">'District of Columbia'</span>: <span class="st">'DC'</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Florida'</span>: <span class="st">'FL'</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Georgia'</span>: <span class="st">'GA'</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Hawaii'</span>: <span class="st">'HI'</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Idaho'</span>: <span class="st">'ID'</span>,</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Illinois'</span>: <span class="st">'IL'</span>,</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Indiana'</span>: <span class="st">'IN'</span>,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Iowa'</span>: <span class="st">'IA'</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Kansas'</span>: <span class="st">'KS'</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Kentucky'</span>: <span class="st">'KY'</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Louisiana'</span>: <span class="st">'LA'</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Maine'</span>: <span class="st">'ME'</span>,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Maryland'</span>: <span class="st">'MD'</span>,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Massachusetts'</span>: <span class="st">'MA'</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Michigan'</span>: <span class="st">'MI'</span>,</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Minnesota'</span>: <span class="st">'MN'</span>,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Mississippi'</span>: <span class="st">'MS'</span>,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Missouri'</span>: <span class="st">'MO'</span>,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Montana'</span>: <span class="st">'MT'</span>,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Nebraska'</span>: <span class="st">'NE'</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Nevada'</span>: <span class="st">'NV'</span>,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New Hampshire'</span>: <span class="st">'NH'</span>,</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New Jersey'</span>: <span class="st">'NJ'</span>,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New Mexico'</span>: <span class="st">'NM'</span>,</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New York'</span>: <span class="st">'NY'</span>,</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">'North Carolina'</span>: <span class="st">'NC'</span>,</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">'North Dakota'</span>: <span class="st">'ND'</span>,</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Ohio'</span>: <span class="st">'OH'</span>,</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Oklahoma'</span>: <span class="st">'OK'</span>,</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Oregon'</span>: <span class="st">'OR'</span>,</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Pennsylvania'</span>: <span class="st">'PA'</span>,</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Rhode Island'</span>: <span class="st">'RI'</span>,</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>        <span class="st">'South Carolina'</span>: <span class="st">'SC'</span>,</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>        <span class="st">'South Dakota'</span>: <span class="st">'SD'</span>,</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Tennessee'</span>: <span class="st">'TN'</span>,</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Texas'</span>: <span class="st">'TX'</span>,</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Utah'</span>: <span class="st">'UT'</span>,</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Vermont'</span>: <span class="st">'VT'</span>,</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Virginia'</span>: <span class="st">'VA'</span>,</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Washington'</span>: <span class="st">'WA'</span>,</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>        <span class="st">'West Virginia'</span>: <span class="st">'WV'</span>,</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Wisconsin'</span>: <span class="st">'WI'</span>,</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Wyoming'</span>: <span class="st">'WY'</span>}</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>state_from_pivot[<span class="st">'Code'</span>] <span class="op">=</span> state_from_pivot[<span class="st">'State'</span>].<span class="bu">map</span>(code)</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.choropleth(state_from_pivot, locations<span class="op">=</span><span class="st">'Code'</span>, color<span class="op">=</span>state_from_pivot[<span class="st">'Immigrant Share of Total State Population'</span>],</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>                           color_continuous_scale<span class="op">=</span><span class="st">'greens'</span>,</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>                           locationmode<span class="op">=</span><span class="st">'USA-states'</span>,</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>                           scope<span class="op">=</span><span class="st">"usa"</span>,</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>fig.update_layout(width<span class="op">=</span><span class="dv">1200</span>, height<span class="op">=</span><span class="dv">800</span>, coloraxis_colorbar<span class="op">=</span><span class="bu">dict</span>(<span class="bu">len</span><span class="op">=</span><span class="fl">0.6</span>),</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>                    coloraxis_colorbar_title<span class="op">=</span><span class="st">'Percent Share'</span>)</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>fig.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig2" class="cell-output cell-output-display">

<div>                            <div id="2848eecb-0fee-4249-9972-0a22d2d2aaac" class="plotly-graph-div" style="height:800px; width:1200px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("2848eecb-0fee-4249-9972-0a22d2d2aaac")) {                    Plotly.newPlot(                        "2848eecb-0fee-4249-9972-0a22d2d2aaac",                        [{"coloraxis":"coloraxis","geo":"geo","hovertemplate":"Code=%{location}<br>Immigrant Share of Total State Population=%{z}<extra></extra>","locationmode":"USA-states","locations":["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX",null,"UT","VT","VA","WA","WV","WI","WY"],"name":"","z":[6.766666666666667,8.333333333333334,13.583333333333334,6.816666666666666,25.25,9.316666666666666,13.516666666666666,8.616666666666667,12.183333333333332,17.366666666666664,9.4,15.666666666666666,6.3,11.799999999999999,4.6,4.316666666666666,7.783333333333332,4.05,5.3500000000000005,4.3,12.016666666666666,12.933333333333332,5.716666666666666,6.199999999999999,2.816666666666667,3.6333333333333333,4.816666666666667,5.166666666666667,14.633333333333333,5.483333333333333,17.033333333333335,8.566666666666666,17.933333333333334,5.833333333333333,3.3833333333333333,5.633333333333333,5.1499999999999995,7.916666666666667,5.6000000000000005,11.983333333333334,5.516666666666667,3.1833333333333336,3.6166666666666667,13.616666666666665,12.183333333333332,6.633333333333333,4.1000000000000005,8.9,10.316666666666666,1.8,3.8166666666666664,2.733333333333333],"type":"choropleth"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"geo":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"center":{},"scope":"usa"},"coloraxis":{"colorbar":{"title":{"text":"Percent Share"},"len":0.6},"colorscale":[[0.0,"rgb(247,252,245)"],[0.125,"rgb(229,245,224)"],[0.25,"rgb(199,233,192)"],[0.375,"rgb(161,217,155)"],[0.5,"rgb(116,196,118)"],[0.625,"rgb(65,171,93)"],[0.75,"rgb(35,139,69)"],[0.875,"rgb(0,109,44)"],[1.0,"rgb(0,68,27)"]]},"legend":{"tracegroupgap":0},"margin":{"t":60},"width":1200,"height":800},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2848eecb-0fee-4249-9972-0a22d2d2aaac');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p>Percentages of total state populations that are authorized immigrants</p>
</div>
</div>
<p>Analyzing this figure, we can see that there are larger immigrant populations alongside the southern border, which makes sense as it is a much lesser distance to travel for immigrants coming from the Americas, which previously stated is the largest group in which immigrants are coming from.</p>
<p>There are hotspots in Florida and some North Eastern states like New York and New Jersey, which is suprising because these states are quite a hike away from the southern border. An explanantion for these numbers could be that these states offer the most oppurtunity for migrants.</p>
<p>When examing the northern border, we can see a lot of cold spots. Further research should look to into there are any other reasons before this besides distance.</p>
</section>
<section id="analyzing-refugee-statistics" class="level2">
<h2 class="anchored" data-anchor-id="analyzing-refugee-statistics">Analyzing Refugee Statistics</h2>
<p>Does the U.S. have the resources to house refugees (Not Immigrants)? To answer this question I will pull the third dataset and build a line plot with two lines. One line being the number of admitted refugees and the other being the annual ceiling the U.S. government claims that year. It will be interesting to see if the admitted line ever surpasses the annual ceiling, and additional research on what was going on in the world at any of those points would lead to interesting insight.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>refugees_clean <span class="op">=</span> refugees.drop(<span class="bu">range</span>(<span class="dv">5</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>refugees_clean <span class="op">=</span> refugees_clean.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>columns_to_float <span class="op">=</span> [<span class="st">'Annual Ceiling'</span>, <span class="st">'Number of Admitted Refugees'</span>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>refugees_clean[columns_to_float] <span class="op">=</span> refugees_clean[columns_to_float].astype(<span class="bu">float</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>refugees_melted <span class="op">=</span> pd.melt(refugees_clean, id_vars<span class="op">=</span><span class="st">'Year'</span>, var_name<span class="op">=</span><span class="st">'Variable'</span>, value_name<span class="op">=</span><span class="st">'Value'</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>group_plot_2 <span class="op">=</span> group_plot</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>group_plot_2.rename(columns <span class="op">=</span> {<span class="st">'variable'</span>:<span class="st">'Year'</span>, <span class="st">'Country'</span>:<span class="st">'Variable'</span>, <span class="st">'value'</span>:<span class="st">'Value'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>line_plot_final <span class="op">=</span> pd.concat([group_plot_2, refugees_melted])</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>line_plot_final.sort_values(by<span class="op">=</span><span class="st">'Year'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Set style and palette</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"white"</span>, palette<span class="op">=</span><span class="st">"mako_r"</span>, rc<span class="op">=</span>{<span class="st">"lines.linewidth"</span>: <span class="fl">2.5</span>})</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Create figure and axis</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the main line plot on the primary y-axis</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>line_plot <span class="op">=</span> sns.lineplot(x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Value'</span>, hue<span class="op">=</span><span class="st">'Variable'</span>, data<span class="op">=</span>line_plot_final[line_plot_final[<span class="st">'Variable'</span>] <span class="op">!=</span> <span class="st">'All Countries (total)'</span>], ax<span class="op">=</span>ax1, palette<span class="op">=</span><span class="st">'mako'</span>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Set primary y-axis labels and title</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>line_plot.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">'Year'</span>, ylabel<span class="op">=</span><span class="st">'Admitted Refugees'</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis major locator</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>line_plot.xaxis.set_major_locator(plt.MultipleLocator(<span class="dv">5</span>))</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Rotate x-axis labels</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis labels with commasSS</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>line_plot.yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, _: <span class="st">'{:,}'</span>.<span class="bu">format</span>(<span class="bu">int</span>(x))))</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Max\AppData\Local\Temp\ipykernel_23480\3725856286.py:3: FutureWarning:

DataFrame.applymap has been deprecated. Use DataFrame.map instead.

C:\Users\Max\anaconda3\envs\capstone\Lib\site-packages\seaborn\_oldcore.py:1119: FutureWarning:

use_inf_as_na option is deprecated and will be removed in a future version. Convert inf values to NaN before operating instead.

C:\Users\Max\anaconda3\envs\capstone\Lib\site-packages\seaborn\_oldcore.py:1119: FutureWarning:

use_inf_as_na option is deprecated and will be removed in a future version. Convert inf values to NaN before operating instead.
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig3-output-2.png" width="849" height="528" class="figure-img"></p>
<figcaption class="figure-caption">Count of refugee admissions compared with refugee capacity</figcaption>
</figure>
</div>
</div>
</div>
<p>To further explain the blue line, this “annual ceiling” is a government reported figure going into the year from the president in consultation with congress.</p>
<p>The number of admitted refugees and annual ceiling follow a similiar pattern until 2020. After 2020 there is not even close to as many refugees coming into the country as the country proclaimed it would be able to take. There is no concrete explanation for these numbers, but one idea could be that since immigration numbers follow the same pattern under the same time period as the increase in the reported ceiling (not shown in figure), that the government wanted to have more funds to support the influx of immigrants, and were pulling some of those funds from their refugee budget. (This is just a conspiracy I thought of and I have no research that can support this claim)</p>
</section>
<section id="estimated-illegal-immigrant-numbers-and-their-distribution" class="level2">
<h2 class="anchored" data-anchor-id="estimated-illegal-immigrant-numbers-and-their-distribution">Estimated Illegal Immigrant Numbers and Their Distribution</h2>
<p>Where are most unauthorized immigrants going when they make it to the U.S.?</p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates[<span class="st">'Code'</span>] <span class="op">=</span> unauthorized_estimates[<span class="st">'State'</span>].<span class="bu">map</span>(code)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates <span class="op">=</span> unauthorized_estimates.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates[<span class="st">'Number of Unauthorized Immigrants'</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>value_to_drop <span class="op">=</span> <span class="st">'United States'</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>pie_plot <span class="op">=</span> unauthorized_estimates[unauthorized_estimates[<span class="st">'State'</span>] <span class="op">!=</span> value_to_drop]</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Select top 5 rows and sum the rest</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>top_5 <span class="op">=</span> pie_plot.head(<span class="dv">5</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>other <span class="op">=</span> pd.DataFrame({</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'State'</span>: [<span class="st">'All Other States'</span>],</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>: [pie_plot[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>][<span class="dv">5</span>:].<span class="bu">sum</span>()]</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenate top 5 and 'Other'</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([top_5, other])</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [(<span class="dv">144</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">238</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">144</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">152</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">251</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">152</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">193</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">193</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">193</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">193</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">204</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">204</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">211</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">211</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">211</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">220</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">220</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">220</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">230</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">230</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">250</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">240</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">248</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">245</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">245</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">220</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">250</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">250</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">210</span><span class="op">/</span><span class="dv">255</span>)]</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co"># o block (250/255, 250/255, 210/255)</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>explode <span class="op">=</span> [<span class="fl">0.1</span> <span class="cf">if</span> df[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>][i] <span class="op">==</span> <span class="bu">max</span>(df[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>]) <span class="cf">else</span> <span class="dv">0</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(df))]</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>plt.pie(df[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>], labels<span class="op">=</span>df[<span class="st">'State'</span>], autopct<span class="op">=</span><span class="st">'</span><span class="sc">%1.1f%%</span><span class="st">'</span>, startangle<span class="op">=</span><span class="dv">140</span>, explode<span class="op">=</span>explode, colors<span class="op">=</span>colors)</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'equal'</span>)  <span class="co"># Equal aspect ratio ensures that pie is drawn as a circle.</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Max\AppData\Local\Temp\ipykernel_23480\1134633154.py:3: FutureWarning:

DataFrame.applymap has been deprecated. Use DataFrame.map instead.
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig4-output-2.png" width="766" height="611" class="figure-img"></p>
<figcaption class="figure-caption">Estimated distribution of unauthorized immigrants over the U.S. (top 5 states)</figcaption>
</figure>
</div>
</div>
</div>
<p>Under the assumption that these estimates are accurate, about 60 percent of the total illegal immigrant population settile in just 5 states. This is a huge disparity and can help to explain why some major city’s are crying out for help over the immigration crisis and dealing with major homelessness issues.</p>
<p>The distribution cannot be as skewed as it is. Citizens of the cities, the cities themselves and even the illegal immigrants will all suffer because of this large disparity. It would be a good idea for policy makers to attempt to more evenly distribute immigrants in order to lighten the burden on these 5 states as well as help these immigrants find more oppurtunity in less populated areas.</p>
</section>
<section id="unaccompanied-children-statistics" class="level2">
<h2 class="anchored" data-anchor-id="unaccompanied-children-statistics">Unaccompanied Children Statistics</h2>
<p>Do unaccompied children get released to certain states at higher rates than others?</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>children_clean <span class="op">=</span> children.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>columns_to_float_2 <span class="op">=</span> [<span class="st">'FY 2014'</span>, <span class="st">'FY 2015'</span>, <span class="st">'FY 2016'</span>, <span class="st">'FY 2017'</span>, <span class="st">'FY 2018'</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">'FY 2019'</span>, <span class="st">'FY 2020'</span>, <span class="st">'FY 2021'</span>, <span class="st">'FY 2022'</span>, <span class="st">'FY 2023 YTD*'</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">'FY 2014 - 2023 YTD* Total'</span>]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>children_clean.replace(<span class="st">'-'</span>, <span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>children_clean[columns_to_float_2] <span class="op">=</span> children_clean[columns_to_float_2].astype(<span class="bu">float</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>merged_children <span class="op">=</span> pd.merge(children_clean, unauthorized_estimates[[<span class="st">'State'</span>,<span class="st">'Number of Unauthorized Immigrants'</span>]], on<span class="op">=</span><span class="st">'State'</span>, how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>merged_children[<span class="st">'Number of Unauthorized Immigrants'</span>] <span class="op">=</span> merged_children[<span class="st">'Number of Unauthorized Immigrants'</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>merged_children[<span class="st">'Ratio'</span>] <span class="op">=</span> (merged_children[<span class="st">'FY 2014 - 2023 YTD* Total'</span>] <span class="op">/</span> merged_children[<span class="st">'Number of Unauthorized Immigrants'</span>])</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>merged_children.sort_values(by<span class="op">=</span>[<span class="st">'Ratio'</span>], ascending<span class="op">=</span><span class="va">False</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>top_3_children <span class="op">=</span> merged_children.head(<span class="dv">3</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>bottom_3_children <span class="op">=</span> merged_children.tail(<span class="dv">8</span>).iloc[<span class="op">-</span><span class="dv">7</span>:<span class="op">-</span><span class="dv">4</span>]</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>children_graph <span class="op">=</span> pd.concat([top_3_children,bottom_3_children], axis<span class="op">=</span><span class="dv">0</span>, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>sns.barplot(children_graph, x<span class="op">=</span><span class="st">'State'</span>, y<span class="op">=</span><span class="st">'Ratio'</span>)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Max\AppData\Local\Temp\ipykernel_23480\1866093635.py:1: FutureWarning:

DataFrame.applymap has been deprecated. Use DataFrame.map instead.
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig5" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig5-output-2.png" width="601" height="494" class="figure-img"></p>
<figcaption class="figure-caption">Top and Bottom 3 States by ratio of children taken in to illegal immigrants taken in</figcaption>
</figure>
</div>
</div>
</div>
<p>For this figure, I combined the number of illegal immigrants in each state as well as each states number of unnacompanied children that have been sent there.</p>
<p>The top 3 states, Louisiana, South Dakota and Alabama all have low total immigrant populations. This is an interesting insight and possibly show cases that these states are more partial to taking in children.</p>
<p>The bottom 3 states, Arizona, Vermont and New Mexico are also interesting because of how low their ratio is.</p>
</section>
<section id="educational-attainment-statistics" class="level2">
<h2 class="anchored" data-anchor-id="educational-attainment-statistics">Educational Attainment Statistics</h2>
<p>Are there differences in educational attainment of recently arrived immigrants based on what countries they come from?</p>
<div class="cell" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'Some_college_degree'</span>] <span class="op">=</span> df_cleaned[<span class="st">'Some College or Associate</span><span class="ch">\'</span><span class="st">s Degree'</span>] <span class="op">+</span> df_cleaned[<span class="st">'Bachelor</span><span class="ch">\'</span><span class="st">s Degree or Higher'</span>]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>df_cleaned.sort_values(<span class="st">'Some_college_degree'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>df_cleaned.replace({<span class="st">'Korea'</span>:<span class="st">'South Korea'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to get continent from country name</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_continent(country):</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        country_code <span class="op">=</span> pc.country_name_to_country_alpha2(country, cn_name_format<span class="op">=</span><span class="st">"default"</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        continent_code <span class="op">=</span> pc.country_alpha2_to_continent_code(country_code)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        continent_name <span class="op">=</span> pc.convert_continent_code_to_continent_name(continent_code)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> continent_name</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Add continent column to DataFrame</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'Continent'</span>] <span class="op">=</span> df_cleaned[<span class="st">'Country'</span>].<span class="bu">apply</span>(get_continent)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>df_cleaned.sort_values(<span class="st">'Some_college_degree'</span>, ascending<span class="op">=</span><span class="va">False</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>education_top_5 <span class="op">=</span> df_cleaned.head(<span class="dv">10</span>)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>education_bot_5 <span class="op">=</span> df_cleaned.tail(<span class="dv">10</span>)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>frames <span class="op">=</span> (education_top_5, education_bot_5)</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>education_plot <span class="op">=</span> pd.concat(frames)</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the figure size</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Define colors for each continent</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>continent_colors <span class="op">=</span> {<span class="st">'Asia'</span>: <span class="st">'yellowgreen'</span>, <span class="st">'Europe'</span>: <span class="st">'teal'</span>, <span class="st">'Africa'</span>: <span class="st">'mediumblue'</span>, <span class="st">'North America'</span>: <span class="st">'gold'</span>, <span class="st">'South America'</span>: <span class="st">'blueviolet'</span>, <span class="st">'Oceania'</span>: <span class="st">'brown'</span>}</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the bar plot</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>bar_plot <span class="op">=</span> plt.barh(education_plot[<span class="st">'Country'</span>], education_plot[<span class="st">'Some_college_degree'</span>], color<span class="op">=</span>[continent_colors[cont] <span class="cf">for</span> cont <span class="kw">in</span> education_plot[<span class="st">'Continent'</span>]])</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Set xlabel</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Percentage of Immigrants that Attained College Degree'</span>)</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Add legend for continent colors</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>plt.legend(handles<span class="op">=</span>[plt.Rectangle((<span class="dv">0</span>,<span class="dv">0</span>),<span class="dv">1</span>,<span class="dv">1</span>, color<span class="op">=</span>continent_colors[cont], label<span class="op">=</span>cont) <span class="cf">for</span> cont <span class="kw">in</span> education_plot[<span class="st">'Continent'</span>].unique()])</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Max\anaconda3\envs\capstone\Lib\site-packages\pycountry\db.py:51: UserWarning:

Country's official_name not found. Country name provided instead.

C:\Users\Max\anaconda3\envs\capstone\Lib\site-packages\pycountry\db.py:51: UserWarning:

Country's common_name not found. Country name provided instead.
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig6" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="blog_files/figure-html/fig6-output-2.png" width="1029" height="509" class="figure-img"></p>
<figcaption class="figure-caption">Top and bottom 10 countries by college degree attainment percentages</figcaption>
</figure>
</div>
</div>
</div>
<p>When looking at the countries with the highest percentage of immigrants attaining a college degree in the U.S., we can see that none of those countries are in either North or South America. In contrast, 90 percent of countries with the lowest percentage are from the Americas.</p>
<p>I believe this points out a big problem. Immigrants coming through our southern border have a signifigantly lower chance of getting a college degree in comparison to immigrants coming from countries in Europe and Asia. I think policy makers should use this data and take some steps to try and bridge this gap in order to create more oppurtunity for under-represented immigrant groups in our higher education system.</p>
</section>
</section>
<section id="future-work" class="level1">
<h1>Future Work</h1>
<p>Some ideas I had to continue this project but did not have time for are:</p>
<ol type="1">
<li>To build a time series model to predict future legal and illegal immigration trends.</li>
<li>Explore data pertaining to immigrants in the U.S. workforce.</li>
<li>Explore correlation between immigration trends and which political parties were in office.</li>
<li>Compare immigration trends and economic data year over year.</li>
<li>Analyze deporation data.</li>
</ol>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p>I hope that you learned something new while reading through my blog post!</p>
<p>Here are the key insights from this project:</p>
<ul>
<li>The number of green cards being issued is on the rise.</li>
<li>Largest immigrant populations along sothern border with hotspots in CA, FL, NY and NJ.</li>
<li>In recent years, we are declaring a need for way more refugees than we are actually taking in.</li>
<li>60% of estimated illegal immigrants settle in just 5 states (CA, TX, NY, FL, NJ).</li>
<li>Some countries show evidence of possible favoritism toward child immigrants.</li>
<li>Huge disparities between immigrant’s countries of origin and their success in U.S. higher education system.</li>
</ul>
<p>U.S. immigration is one the strongest gateways for people around the world to find a better life and oppurtunity. Making sure that the correct policies are put in place based on the current state of immigration will help to ensure that the U.S. can always except and integrate immigrants into the country without the current citizens experienceing diminishing returns. It is important to conduct ana analysis like this one so that the current landscape can be understood and better changes can be made to the system, for U.S. citizens and incoming immigrants alike.</p>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb13" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Navigating the Complexities of U.S. Migration"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Spring 2024"</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Maxwell Bilyk"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> references.bib</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> false</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: default</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">    rendering: embed-resources</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf: default</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="al">![Source: Forbes](https://imageio.forbes.com/specials-images/imageserve/1132026265/Illustration-of-USA-immigration/0x0.jpg?format=jpg&amp;crop=8176,4013,x0,y391,safe&amp;width=1440)</span>{fig-alt="U.S. flag with migrants"}</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>My inspiration for this research came from my own discomfort with being naive to the subject of immigration in my own country. All I hear about on the news is immigration. Some news channels tell me that it is ruining our country and we need to close the borders. Other sources tell me that we aren't doing enough as a country to support immigrants and that they could really beneift our country if we allocated resources correctly to integrate them smoothly into our society.</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>I wanted to be able to make my own conclusions, or atleast better understand this domain, so I sought out concrete data pertaining to U.S. immigration, and began my analysis.</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>This project aims to uncover the patterns of immigration over time, observe areas where immigrants are residing, and highlight disparities between the educational attainment of immigrants based on their country of origin.</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>The findings from this project could potentially be used by U.S. policymakers to help them make more informed decisions regarding U.S. immigration.</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="fu"># The Data</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>The data used for this project comes from <span class="co">[</span><span class="ot">The Nonpartisan Migration Policy Institute</span><span class="co">](https://www.migrationpolicy.org/programs/data-hub/us-immigration-trends?gad_source=1&amp;gclid=CjwKCAiAivGuBhBEEiwAWiFmYbxFPH7H1xkFCmwWRPyeHY8k87cMI-NkOL9lygAPqFa7ppdZx1vOxxoC88YQAvD_BwE)</span>. This orginization is an independent group that seeks to improve immigration and integration policies in the U.S. through research and analysis of data.</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>This was the perfect source of data for me. Through my background research I found so many biased and unproffesional sources that were publishing immigration data, and I did not want to include their data in my project.</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>In total, I worked with six datasets...</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Legal Immigrants</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>A dataset that has the annual number of new legal permanent residents by country of birth.**</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Distribution of Legal Immigrants by State</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>A dataset that holds information on the immigrant population by state.</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Annual Refugees</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>A dataset that holds information on U.S. annual refugee resettlement ceiling and annual number of admitted refugees from the years 1975-2024.</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Illegal Immigrant Estimates</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>A dataset that holds information on the National and State estimates of the unnathorized immigrant population from 2015 to 2019 (totals, not year over year).</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Unacompanied Children</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>A dataset that holds information on the number of unaccompanied children released to sponsors by state from fiscal years 2014-2023. </span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Educational Attainment of Immigrants in the U.S.</span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>A dataset that holds information on the educational attainment of recently arrived immigrants (ages 25 and over) by country of birth as of 2022.</span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Preprocessing</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>Feel free to skip this section if it is not of interest to you. It conatins information on data cleaning and the code block contains all imports needed for the analysis and the code cleaning the datasets.</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>The datasets were all brought in from excel spreadsheets so a lot of them had column names with spaces that had to be cleaned. Furthermore, a lot of values contained percentage symbols which also had to be remobved and those same values needed their data types to be changed in order to conduct analysis with them.</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>If you just want to look at the numbers and read through them. The best thing to do is go through my github repository where this website stems from and to read them through excel. However to conduct any sort of analysis with python or another programming language, cleaning the datasets in these ways is necessary.</span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, warning=FALSE, error=FALSE}</span></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.figure_factory <span class="im">as</span> ff</span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.ticker <span class="im">import</span> FuncFormatter</span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pycountry_convert <span class="im">as</span> pc</span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true" tabindex="-1"></a>education <span class="op">=</span> pd.read_csv(<span class="st">'educational_attainment - Sheet1.csv'</span>)</span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_percent(df, columns):</span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> column <span class="kw">in</span> columns:</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true" tabindex="-1"></a>        df[column] <span class="op">=</span> df[column].<span class="bu">str</span>.replace(<span class="st">'%'</span>, <span class="st">''</span>).astype(<span class="bu">float</span>)</span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb13-80"><a href="#cb13-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-81"><a href="#cb13-81" aria-hidden="true" tabindex="-1"></a><span class="co"># List of columns to remove '%' from</span></span>
<span id="cb13-82"><a href="#cb13-82" aria-hidden="true" tabindex="-1"></a>columns_to_remove_percent <span class="op">=</span> [<span class="st">'Less than 9th Grade'</span>, <span class="st">'9th-12th Grade'</span>,</span>
<span id="cb13-83"><a href="#cb13-83" aria-hidden="true" tabindex="-1"></a>       <span class="st">'High School Diploma or Equivalent'</span>,</span>
<span id="cb13-84"><a href="#cb13-84" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Some College or Associate's Degree"</span>, <span class="st">"Bachelor's Degree or Higher"</span>]</span>
<span id="cb13-85"><a href="#cb13-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-86"><a href="#cb13-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function</span></span>
<span id="cb13-87"><a href="#cb13-87" aria-hidden="true" tabindex="-1"></a>df_cleaned <span class="op">=</span> remove_percent(education.copy(), columns_to_remove_percent)</span>
<span id="cb13-88"><a href="#cb13-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-89"><a href="#cb13-89" aria-hidden="true" tabindex="-1"></a>children <span class="op">=</span> pd.read_csv(<span class="st">"Unnacompanied_children - Sheet1.csv"</span>)</span>
<span id="cb13-90"><a href="#cb13-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-91"><a href="#cb13-91" aria-hidden="true" tabindex="-1"></a>refugees <span class="op">=</span> pd.read_csv(<span class="st">"Refugge_resettlement - Sheet1.csv"</span>)</span>
<span id="cb13-92"><a href="#cb13-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-93"><a href="#cb13-93" aria-hidden="true" tabindex="-1"></a>immigrant_state <span class="op">=</span> pd.read_csv(<span class="st">"Immigrant_pop_state - Sheet1.csv"</span>)</span>
<span id="cb13-94"><a href="#cb13-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-95"><a href="#cb13-95" aria-hidden="true" tabindex="-1"></a>immigrant_state[<span class="st">'Immigrant Share of Total State Population'</span>] <span class="op">=</span> immigrant_state[<span class="st">'Immigrant Share of Total State Population'</span>].<span class="bu">str</span>.replace(<span class="st">'%'</span>,<span class="st">''</span>).astype(<span class="bu">float</span>)</span>
<span id="cb13-96"><a href="#cb13-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-97"><a href="#cb13-97" aria-hidden="true" tabindex="-1"></a>legal_country <span class="op">=</span> pd.read_csv(<span class="st">"new_legals_country - Sheet1.csv"</span>)</span>
<span id="cb13-98"><a href="#cb13-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-99"><a href="#cb13-99" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates <span class="op">=</span> pd.read_csv(<span class="st">"Unauthorized_estimates - Sheet1.csv"</span>)</span>
<span id="cb13-100"><a href="#cb13-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-101"><a href="#cb13-101" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>] <span class="op">=</span> unauthorized_estimates[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>].<span class="bu">str</span>.replace(<span class="st">'%'</span>,<span class="st">''</span>).astype(<span class="bu">float</span>)<span class="op">;</span></span>
<span id="cb13-102"><a href="#cb13-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-103"><a href="#cb13-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-104"><a href="#cb13-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-105"><a href="#cb13-105" aria-hidden="true" tabindex="-1"></a><span class="fu"># Questions and Results</span></span>
<span id="cb13-106"><a href="#cb13-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-107"><a href="#cb13-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-108"><a href="#cb13-108" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analyzing annual green card admissions</span></span>
<span id="cb13-109"><a href="#cb13-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-110"><a href="#cb13-110" aria-hidden="true" tabindex="-1"></a>How many green cards are issued annually and to what countries are most of the green cards issued to? I plan to answer this question by pulling the first dataset, and then creating a line plot of the total amount of green cards issued year over year to analyze the pattern. Then I will total all the countries over all the given years.</span>
<span id="cb13-111"><a href="#cb13-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-112"><a href="#cb13-112" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, warning=FALSE, error=FALSE}</span></span>
<span id="cb13-113"><a href="#cb13-113" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig1</span></span>
<span id="cb13-114"><a href="#cb13-114" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Number of Green Cards Admitted by U.S. 1999-2022"</span></span>
<span id="cb13-115"><a href="#cb13-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-116"><a href="#cb13-116" aria-hidden="true" tabindex="-1"></a>legal_country_clean <span class="op">=</span> legal_country.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb13-117"><a href="#cb13-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-118"><a href="#cb13-118" aria-hidden="true" tabindex="-1"></a>legal_country_clean.rename(columns<span class="op">=</span> {<span class="st">'Region/Sub-Region or Country of Birth'</span>:<span class="st">'Country'</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb13-119"><a href="#cb13-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-120"><a href="#cb13-120" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'1999'</span>, <span class="st">'2000'</span>, <span class="st">'2001'</span>, <span class="st">'2002'</span>, <span class="st">'2003'</span>, <span class="st">'2004'</span>, <span class="st">'2005'</span>,</span>
<span id="cb13-121"><a href="#cb13-121" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2006'</span>, <span class="st">'2007'</span>, <span class="st">'2008'</span>, <span class="st">'2009'</span>, <span class="st">'2010'</span>, <span class="st">'2011'</span>, <span class="st">'2012'</span>, <span class="st">'2013'</span>, <span class="st">'2014'</span>,</span>
<span id="cb13-122"><a href="#cb13-122" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2015'</span>, <span class="st">'2016'</span>, <span class="st">'2017'</span>, <span class="st">'2018'</span>, <span class="st">'2019'</span>, <span class="st">'2020'</span>, <span class="st">'2021'</span>, <span class="st">'2022'</span>]</span>
<span id="cb13-123"><a href="#cb13-123" aria-hidden="true" tabindex="-1"></a>legal_country_clean[cols] <span class="op">=</span> legal_country_clean[cols].<span class="bu">apply</span>(pd.to_numeric, errors<span class="op">=</span><span class="st">'coerce'</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb13-124"><a href="#cb13-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-125"><a href="#cb13-125" aria-hidden="true" tabindex="-1"></a>grouped_legal <span class="op">=</span> pd.melt(legal_country_clean, id_vars<span class="op">=</span>[<span class="st">'Country'</span>], value_vars<span class="op">=</span>[<span class="st">'1999'</span>, <span class="st">'2000'</span>, <span class="st">'2001'</span>, <span class="st">'2002'</span>, <span class="st">'2003'</span>, <span class="st">'2004'</span>, <span class="st">'2005'</span>,</span>
<span id="cb13-126"><a href="#cb13-126" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2006'</span>, <span class="st">'2007'</span>, <span class="st">'2008'</span>, <span class="st">'2009'</span>, <span class="st">'2010'</span>, <span class="st">'2011'</span>, <span class="st">'2012'</span>, <span class="st">'2013'</span>, <span class="st">'2014'</span>,</span>
<span id="cb13-127"><a href="#cb13-127" aria-hidden="true" tabindex="-1"></a>       <span class="st">'2015'</span>, <span class="st">'2016'</span>, <span class="st">'2017'</span>, <span class="st">'2018'</span>, <span class="st">'2019'</span>, <span class="st">'2020'</span>, <span class="st">'2021'</span>, <span class="st">'2022'</span>])</span>
<span id="cb13-128"><a href="#cb13-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-129"><a href="#cb13-129" aria-hidden="true" tabindex="-1"></a>val_to_drop <span class="op">=</span> <span class="st">'All Countries (total)'</span></span>
<span id="cb13-130"><a href="#cb13-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-131"><a href="#cb13-131" aria-hidden="true" tabindex="-1"></a>grouped_legal_plot <span class="op">=</span> grouped_legal[grouped_legal[<span class="st">'Country'</span>] <span class="op">!=</span> val_to_drop]</span>
<span id="cb13-132"><a href="#cb13-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-133"><a href="#cb13-133" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> (grouped_legal[<span class="st">'Country'</span>] <span class="op">==</span> <span class="st">'All Countries (total)'</span>)<span class="op">;</span></span>
<span id="cb13-134"><a href="#cb13-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-135"><a href="#cb13-135" aria-hidden="true" tabindex="-1"></a>group_plot <span class="op">=</span> grouped_legal[mask]<span class="op">;</span></span>
<span id="cb13-136"><a href="#cb13-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-137"><a href="#cb13-137" aria-hidden="true" tabindex="-1"></a>sns.lineplot(group_plot, x<span class="op">=</span><span class="st">'variable'</span>, y<span class="op">=</span><span class="st">'value'</span>).<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">'Year'</span>, ylabel<span class="op">=</span><span class="st">'Number of Green Cards Issued'</span>)<span class="op">;</span></span>
<span id="cb13-138"><a href="#cb13-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-139"><a href="#cb13-139" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"white"</span>, palette<span class="op">=</span><span class="st">"mako_r"</span>, rc<span class="op">=</span>{<span class="st">"lines.linewidth"</span>: <span class="fl">2.5</span>})</span>
<span id="cb13-140"><a href="#cb13-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-141"><a href="#cb13-141" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_locator(plt.MultipleLocator(<span class="dv">5</span>))</span>
<span id="cb13-142"><a href="#cb13-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-143"><a href="#cb13-143" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb13-144"><a href="#cb13-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-145"><a href="#cb13-145" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span>
<span id="cb13-146"><a href="#cb13-146" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-147"><a href="#cb13-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-148"><a href="#cb13-148" aria-hidden="true" tabindex="-1"></a>Analyzing this figure, we can see that the number of green cards issued hit a low after 2001, and then spikes until about 2007. After that, there is a steady decrease in the number of green cards issued until 2020, where there has been an increase till present day.</span>
<span id="cb13-149"><a href="#cb13-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-150"><a href="#cb13-150" aria-hidden="true" tabindex="-1"></a>Some possible explanations for these patterns can be the terrorist attack of 9/11 leading to a much more strict border control. Also, president Biden's election into office in 2021 explains the increases we are seeing now. His campaign spoke a lot about letting more immigrants into the country and it is apparent that he and his administration have been keeping their promises.</span>
<span id="cb13-151"><a href="#cb13-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-152"><a href="#cb13-152" aria-hidden="true" tabindex="-1"></a>The vast majority of these green cards were issued to individuals residing in the Americas as well as Asia. (Not shown in figure)</span>
<span id="cb13-153"><a href="#cb13-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-154"><a href="#cb13-154" aria-hidden="true" tabindex="-1"></a><span class="fu">## Immigration Trends</span></span>
<span id="cb13-155"><a href="#cb13-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-156"><a href="#cb13-156" aria-hidden="true" tabindex="-1"></a>What are the trends of state immigration? For this question, I will build a chloropleth where the color of each state will correspond with the state's immigrant share of total state population in 2022.</span>
<span id="cb13-157"><a href="#cb13-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-158"><a href="#cb13-158" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, warning=FALSE, error=FALSE}</span></span>
<span id="cb13-159"><a href="#cb13-159" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig2</span></span>
<span id="cb13-160"><a href="#cb13-160" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percentages of total state populations that are authorized immigrants"</span></span>
<span id="cb13-161"><a href="#cb13-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-162"><a href="#cb13-162" aria-hidden="true" tabindex="-1"></a>state_pivot <span class="op">=</span> pd.pivot_table(immigrant_state, values<span class="op">=</span><span class="st">'Immigrant Share of Total State Population'</span>,</span>
<span id="cb13-163"><a href="#cb13-163" aria-hidden="true" tabindex="-1"></a>                             index<span class="op">=</span><span class="st">'Country'</span>, aggfunc<span class="op">=</span><span class="st">'mean'</span>)</span>
<span id="cb13-164"><a href="#cb13-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-165"><a href="#cb13-165" aria-hidden="true" tabindex="-1"></a>state_from_pivot <span class="op">=</span> state_pivot.reset_index()</span>
<span id="cb13-166"><a href="#cb13-166" aria-hidden="true" tabindex="-1"></a>state_from_pivot.rename(columns<span class="op">=</span>{<span class="st">'Country'</span>:<span class="st">'State'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-167"><a href="#cb13-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-168"><a href="#cb13-168" aria-hidden="true" tabindex="-1"></a>code <span class="op">=</span> {<span class="st">'Alabama'</span>: <span class="st">'AL'</span>,</span>
<span id="cb13-169"><a href="#cb13-169" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Alaska'</span>: <span class="st">'AK'</span>,</span>
<span id="cb13-170"><a href="#cb13-170" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Arizona'</span>: <span class="st">'AZ'</span>,</span>
<span id="cb13-171"><a href="#cb13-171" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Arkansas'</span>: <span class="st">'AR'</span>,</span>
<span id="cb13-172"><a href="#cb13-172" aria-hidden="true" tabindex="-1"></a>        <span class="st">'California'</span>: <span class="st">'CA'</span>,</span>
<span id="cb13-173"><a href="#cb13-173" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Colorado'</span>: <span class="st">'CO'</span>,</span>
<span id="cb13-174"><a href="#cb13-174" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Connecticut'</span>: <span class="st">'CT'</span>,</span>
<span id="cb13-175"><a href="#cb13-175" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Delaware'</span>: <span class="st">'DE'</span>,</span>
<span id="cb13-176"><a href="#cb13-176" aria-hidden="true" tabindex="-1"></a>        <span class="st">'District of Columbia'</span>: <span class="st">'DC'</span>,</span>
<span id="cb13-177"><a href="#cb13-177" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Florida'</span>: <span class="st">'FL'</span>,</span>
<span id="cb13-178"><a href="#cb13-178" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Georgia'</span>: <span class="st">'GA'</span>,</span>
<span id="cb13-179"><a href="#cb13-179" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Hawaii'</span>: <span class="st">'HI'</span>,</span>
<span id="cb13-180"><a href="#cb13-180" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Idaho'</span>: <span class="st">'ID'</span>,</span>
<span id="cb13-181"><a href="#cb13-181" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Illinois'</span>: <span class="st">'IL'</span>,</span>
<span id="cb13-182"><a href="#cb13-182" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Indiana'</span>: <span class="st">'IN'</span>,</span>
<span id="cb13-183"><a href="#cb13-183" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Iowa'</span>: <span class="st">'IA'</span>,</span>
<span id="cb13-184"><a href="#cb13-184" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Kansas'</span>: <span class="st">'KS'</span>,</span>
<span id="cb13-185"><a href="#cb13-185" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Kentucky'</span>: <span class="st">'KY'</span>,</span>
<span id="cb13-186"><a href="#cb13-186" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Louisiana'</span>: <span class="st">'LA'</span>,</span>
<span id="cb13-187"><a href="#cb13-187" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Maine'</span>: <span class="st">'ME'</span>,</span>
<span id="cb13-188"><a href="#cb13-188" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Maryland'</span>: <span class="st">'MD'</span>,</span>
<span id="cb13-189"><a href="#cb13-189" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Massachusetts'</span>: <span class="st">'MA'</span>,</span>
<span id="cb13-190"><a href="#cb13-190" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Michigan'</span>: <span class="st">'MI'</span>,</span>
<span id="cb13-191"><a href="#cb13-191" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Minnesota'</span>: <span class="st">'MN'</span>,</span>
<span id="cb13-192"><a href="#cb13-192" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Mississippi'</span>: <span class="st">'MS'</span>,</span>
<span id="cb13-193"><a href="#cb13-193" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Missouri'</span>: <span class="st">'MO'</span>,</span>
<span id="cb13-194"><a href="#cb13-194" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Montana'</span>: <span class="st">'MT'</span>,</span>
<span id="cb13-195"><a href="#cb13-195" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Nebraska'</span>: <span class="st">'NE'</span>,</span>
<span id="cb13-196"><a href="#cb13-196" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Nevada'</span>: <span class="st">'NV'</span>,</span>
<span id="cb13-197"><a href="#cb13-197" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New Hampshire'</span>: <span class="st">'NH'</span>,</span>
<span id="cb13-198"><a href="#cb13-198" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New Jersey'</span>: <span class="st">'NJ'</span>,</span>
<span id="cb13-199"><a href="#cb13-199" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New Mexico'</span>: <span class="st">'NM'</span>,</span>
<span id="cb13-200"><a href="#cb13-200" aria-hidden="true" tabindex="-1"></a>        <span class="st">'New York'</span>: <span class="st">'NY'</span>,</span>
<span id="cb13-201"><a href="#cb13-201" aria-hidden="true" tabindex="-1"></a>        <span class="st">'North Carolina'</span>: <span class="st">'NC'</span>,</span>
<span id="cb13-202"><a href="#cb13-202" aria-hidden="true" tabindex="-1"></a>        <span class="st">'North Dakota'</span>: <span class="st">'ND'</span>,</span>
<span id="cb13-203"><a href="#cb13-203" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Ohio'</span>: <span class="st">'OH'</span>,</span>
<span id="cb13-204"><a href="#cb13-204" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Oklahoma'</span>: <span class="st">'OK'</span>,</span>
<span id="cb13-205"><a href="#cb13-205" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Oregon'</span>: <span class="st">'OR'</span>,</span>
<span id="cb13-206"><a href="#cb13-206" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Pennsylvania'</span>: <span class="st">'PA'</span>,</span>
<span id="cb13-207"><a href="#cb13-207" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Rhode Island'</span>: <span class="st">'RI'</span>,</span>
<span id="cb13-208"><a href="#cb13-208" aria-hidden="true" tabindex="-1"></a>        <span class="st">'South Carolina'</span>: <span class="st">'SC'</span>,</span>
<span id="cb13-209"><a href="#cb13-209" aria-hidden="true" tabindex="-1"></a>        <span class="st">'South Dakota'</span>: <span class="st">'SD'</span>,</span>
<span id="cb13-210"><a href="#cb13-210" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Tennessee'</span>: <span class="st">'TN'</span>,</span>
<span id="cb13-211"><a href="#cb13-211" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Texas'</span>: <span class="st">'TX'</span>,</span>
<span id="cb13-212"><a href="#cb13-212" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Utah'</span>: <span class="st">'UT'</span>,</span>
<span id="cb13-213"><a href="#cb13-213" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Vermont'</span>: <span class="st">'VT'</span>,</span>
<span id="cb13-214"><a href="#cb13-214" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Virginia'</span>: <span class="st">'VA'</span>,</span>
<span id="cb13-215"><a href="#cb13-215" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Washington'</span>: <span class="st">'WA'</span>,</span>
<span id="cb13-216"><a href="#cb13-216" aria-hidden="true" tabindex="-1"></a>        <span class="st">'West Virginia'</span>: <span class="st">'WV'</span>,</span>
<span id="cb13-217"><a href="#cb13-217" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Wisconsin'</span>: <span class="st">'WI'</span>,</span>
<span id="cb13-218"><a href="#cb13-218" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Wyoming'</span>: <span class="st">'WY'</span>}</span>
<span id="cb13-219"><a href="#cb13-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-220"><a href="#cb13-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-221"><a href="#cb13-221" aria-hidden="true" tabindex="-1"></a>state_from_pivot[<span class="st">'Code'</span>] <span class="op">=</span> state_from_pivot[<span class="st">'State'</span>].<span class="bu">map</span>(code)</span>
<span id="cb13-222"><a href="#cb13-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-223"><a href="#cb13-223" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.choropleth(state_from_pivot, locations<span class="op">=</span><span class="st">'Code'</span>, color<span class="op">=</span>state_from_pivot[<span class="st">'Immigrant Share of Total State Population'</span>],</span>
<span id="cb13-224"><a href="#cb13-224" aria-hidden="true" tabindex="-1"></a>                           color_continuous_scale<span class="op">=</span><span class="st">'greens'</span>,</span>
<span id="cb13-225"><a href="#cb13-225" aria-hidden="true" tabindex="-1"></a>                           locationmode<span class="op">=</span><span class="st">'USA-states'</span>,</span>
<span id="cb13-226"><a href="#cb13-226" aria-hidden="true" tabindex="-1"></a>                           scope<span class="op">=</span><span class="st">"usa"</span>,</span>
<span id="cb13-227"><a href="#cb13-227" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb13-228"><a href="#cb13-228" aria-hidden="true" tabindex="-1"></a>fig.update_layout(width<span class="op">=</span><span class="dv">1200</span>, height<span class="op">=</span><span class="dv">800</span>, coloraxis_colorbar<span class="op">=</span><span class="bu">dict</span>(<span class="bu">len</span><span class="op">=</span><span class="fl">0.6</span>),</span>
<span id="cb13-229"><a href="#cb13-229" aria-hidden="true" tabindex="-1"></a>                    coloraxis_colorbar_title<span class="op">=</span><span class="st">'Percent Share'</span>)</span>
<span id="cb13-230"><a href="#cb13-230" aria-hidden="true" tabindex="-1"></a>fig.show()<span class="op">;</span></span>
<span id="cb13-231"><a href="#cb13-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-232"><a href="#cb13-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-233"><a href="#cb13-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-234"><a href="#cb13-234" aria-hidden="true" tabindex="-1"></a>Analyzing this figure, we can see that there are larger immigrant populations alongside the southern border, which makes sense as it is a much lesser distance to travel for immigrants coming from the Americas, which previously stated is the largest group in which immigrants are coming from.</span>
<span id="cb13-235"><a href="#cb13-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-236"><a href="#cb13-236" aria-hidden="true" tabindex="-1"></a>There are hotspots in Florida and some North Eastern states like New York and New Jersey, which is suprising because these states are quite a hike away from the southern border. An explanantion for these numbers could be that these states offer the most oppurtunity for migrants.</span>
<span id="cb13-237"><a href="#cb13-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-238"><a href="#cb13-238" aria-hidden="true" tabindex="-1"></a>When examing the northern border, we can see a lot of cold spots. Further research should look to into there are any other reasons before this besides distance.</span>
<span id="cb13-239"><a href="#cb13-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-240"><a href="#cb13-240" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analyzing Refugee Statistics</span></span>
<span id="cb13-241"><a href="#cb13-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-242"><a href="#cb13-242" aria-hidden="true" tabindex="-1"></a>Does the U.S. have the resources to house refugees (Not Immigrants)? To answer this question I will pull the third dataset and build a line plot with two lines. One line being the number of admitted refugees and the other being the annual ceiling the U.S. government claims that year. It will be interesting to see if the admitted line ever surpasses the annual ceiling, and additional research on what was going on in the world at any of those points would lead to interesting insight.</span>
<span id="cb13-243"><a href="#cb13-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-244"><a href="#cb13-244" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, warning=FALSE, error=FALSE}</span></span>
<span id="cb13-245"><a href="#cb13-245" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig3</span></span>
<span id="cb13-246"><a href="#cb13-246" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Count of refugee admissions compared with refugee capacity"</span></span>
<span id="cb13-247"><a href="#cb13-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-248"><a href="#cb13-248" aria-hidden="true" tabindex="-1"></a>refugees_clean <span class="op">=</span> refugees.drop(<span class="bu">range</span>(<span class="dv">5</span>))</span>
<span id="cb13-249"><a href="#cb13-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-250"><a href="#cb13-250" aria-hidden="true" tabindex="-1"></a>refugees_clean <span class="op">=</span> refugees_clean.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb13-251"><a href="#cb13-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-252"><a href="#cb13-252" aria-hidden="true" tabindex="-1"></a>columns_to_float <span class="op">=</span> [<span class="st">'Annual Ceiling'</span>, <span class="st">'Number of Admitted Refugees'</span>]</span>
<span id="cb13-253"><a href="#cb13-253" aria-hidden="true" tabindex="-1"></a>refugees_clean[columns_to_float] <span class="op">=</span> refugees_clean[columns_to_float].astype(<span class="bu">float</span>)</span>
<span id="cb13-254"><a href="#cb13-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-255"><a href="#cb13-255" aria-hidden="true" tabindex="-1"></a>refugees_melted <span class="op">=</span> pd.melt(refugees_clean, id_vars<span class="op">=</span><span class="st">'Year'</span>, var_name<span class="op">=</span><span class="st">'Variable'</span>, value_name<span class="op">=</span><span class="st">'Value'</span>)</span>
<span id="cb13-256"><a href="#cb13-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-257"><a href="#cb13-257" aria-hidden="true" tabindex="-1"></a>group_plot_2 <span class="op">=</span> group_plot</span>
<span id="cb13-258"><a href="#cb13-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-259"><a href="#cb13-259" aria-hidden="true" tabindex="-1"></a>group_plot_2.rename(columns <span class="op">=</span> {<span class="st">'variable'</span>:<span class="st">'Year'</span>, <span class="st">'Country'</span>:<span class="st">'Variable'</span>, <span class="st">'value'</span>:<span class="st">'Value'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-260"><a href="#cb13-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-261"><a href="#cb13-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-262"><a href="#cb13-262" aria-hidden="true" tabindex="-1"></a>line_plot_final <span class="op">=</span> pd.concat([group_plot_2, refugees_melted])</span>
<span id="cb13-263"><a href="#cb13-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-264"><a href="#cb13-264" aria-hidden="true" tabindex="-1"></a>line_plot_final.sort_values(by<span class="op">=</span><span class="st">'Year'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-265"><a href="#cb13-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-266"><a href="#cb13-266" aria-hidden="true" tabindex="-1"></a><span class="co"># Set style and palette</span></span>
<span id="cb13-267"><a href="#cb13-267" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"white"</span>, palette<span class="op">=</span><span class="st">"mako_r"</span>, rc<span class="op">=</span>{<span class="st">"lines.linewidth"</span>: <span class="fl">2.5</span>})</span>
<span id="cb13-268"><a href="#cb13-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-269"><a href="#cb13-269" aria-hidden="true" tabindex="-1"></a><span class="co"># Create figure and axis</span></span>
<span id="cb13-270"><a href="#cb13-270" aria-hidden="true" tabindex="-1"></a>fig, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb13-271"><a href="#cb13-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-272"><a href="#cb13-272" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the main line plot on the primary y-axis</span></span>
<span id="cb13-273"><a href="#cb13-273" aria-hidden="true" tabindex="-1"></a>line_plot <span class="op">=</span> sns.lineplot(x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Value'</span>, hue<span class="op">=</span><span class="st">'Variable'</span>, data<span class="op">=</span>line_plot_final[line_plot_final[<span class="st">'Variable'</span>] <span class="op">!=</span> <span class="st">'All Countries (total)'</span>], ax<span class="op">=</span>ax1, palette<span class="op">=</span><span class="st">'mako'</span>)</span>
<span id="cb13-274"><a href="#cb13-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-275"><a href="#cb13-275" aria-hidden="true" tabindex="-1"></a><span class="co"># Set primary y-axis labels and title</span></span>
<span id="cb13-276"><a href="#cb13-276" aria-hidden="true" tabindex="-1"></a>line_plot.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">'Year'</span>, ylabel<span class="op">=</span><span class="st">'Admitted Refugees'</span>)</span>
<span id="cb13-277"><a href="#cb13-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-278"><a href="#cb13-278" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis major locator</span></span>
<span id="cb13-279"><a href="#cb13-279" aria-hidden="true" tabindex="-1"></a>line_plot.xaxis.set_major_locator(plt.MultipleLocator(<span class="dv">5</span>))</span>
<span id="cb13-280"><a href="#cb13-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-281"><a href="#cb13-281" aria-hidden="true" tabindex="-1"></a><span class="co"># Rotate x-axis labels</span></span>
<span id="cb13-282"><a href="#cb13-282" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb13-283"><a href="#cb13-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-284"><a href="#cb13-284" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis labels with commasSS</span></span>
<span id="cb13-285"><a href="#cb13-285" aria-hidden="true" tabindex="-1"></a>line_plot.yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, _: <span class="st">'{:,}'</span>.<span class="bu">format</span>(<span class="bu">int</span>(x))))</span>
<span id="cb13-286"><a href="#cb13-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-287"><a href="#cb13-287" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb13-288"><a href="#cb13-288" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span>
<span id="cb13-289"><a href="#cb13-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-290"><a href="#cb13-290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-291"><a href="#cb13-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-292"><a href="#cb13-292" aria-hidden="true" tabindex="-1"></a>To further explain the blue line, this "annual ceiling" is a government reported figure going into the year from the president in consultation with congress.</span>
<span id="cb13-293"><a href="#cb13-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-294"><a href="#cb13-294" aria-hidden="true" tabindex="-1"></a>The number of admitted refugees and annual ceiling follow a similiar pattern until 2020. After 2020 there is not even close to as many refugees coming into the country as the country proclaimed it would be able to take. There is no concrete explanation for these numbers, but one idea could be that since immigration numbers follow the same pattern under the same time period as the increase in the reported ceiling (not shown in figure), that the government wanted to have more funds to support the influx of immigrants, and were pulling some of those funds from their refugee budget. (This is just a conspiracy I thought of and I have no research that can support this claim)</span>
<span id="cb13-295"><a href="#cb13-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-296"><a href="#cb13-296" aria-hidden="true" tabindex="-1"></a><span class="fu">## Estimated Illegal Immigrant Numbers and Their Distribution</span></span>
<span id="cb13-297"><a href="#cb13-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-298"><a href="#cb13-298" aria-hidden="true" tabindex="-1"></a>Where are most unauthorized immigrants going when they make it to the U.S.?</span>
<span id="cb13-299"><a href="#cb13-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-300"><a href="#cb13-300" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, warning=FALSE, error=FALSE}</span></span>
<span id="cb13-301"><a href="#cb13-301" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig4</span></span>
<span id="cb13-302"><a href="#cb13-302" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Estimated distribution of unauthorized immigrants over the U.S. (top 5 states)"</span></span>
<span id="cb13-303"><a href="#cb13-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-304"><a href="#cb13-304" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates[<span class="st">'Code'</span>] <span class="op">=</span> unauthorized_estimates[<span class="st">'State'</span>].<span class="bu">map</span>(code)</span>
<span id="cb13-305"><a href="#cb13-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-306"><a href="#cb13-306" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates <span class="op">=</span> unauthorized_estimates.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb13-307"><a href="#cb13-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-308"><a href="#cb13-308" aria-hidden="true" tabindex="-1"></a>unauthorized_estimates[<span class="st">'Number of Unauthorized Immigrants'</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb13-309"><a href="#cb13-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-310"><a href="#cb13-310" aria-hidden="true" tabindex="-1"></a>value_to_drop <span class="op">=</span> <span class="st">'United States'</span></span>
<span id="cb13-311"><a href="#cb13-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-312"><a href="#cb13-312" aria-hidden="true" tabindex="-1"></a>pie_plot <span class="op">=</span> unauthorized_estimates[unauthorized_estimates[<span class="st">'State'</span>] <span class="op">!=</span> value_to_drop]</span>
<span id="cb13-313"><a href="#cb13-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-314"><a href="#cb13-314" aria-hidden="true" tabindex="-1"></a><span class="co"># Select top 5 rows and sum the rest</span></span>
<span id="cb13-315"><a href="#cb13-315" aria-hidden="true" tabindex="-1"></a>top_5 <span class="op">=</span> pie_plot.head(<span class="dv">5</span>)</span>
<span id="cb13-316"><a href="#cb13-316" aria-hidden="true" tabindex="-1"></a>other <span class="op">=</span> pd.DataFrame({</span>
<span id="cb13-317"><a href="#cb13-317" aria-hidden="true" tabindex="-1"></a>    <span class="st">'State'</span>: [<span class="st">'All Other States'</span>],</span>
<span id="cb13-318"><a href="#cb13-318" aria-hidden="true" tabindex="-1"></a>    <span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>: [pie_plot[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>][<span class="dv">5</span>:].<span class="bu">sum</span>()]</span>
<span id="cb13-319"><a href="#cb13-319" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb13-320"><a href="#cb13-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-321"><a href="#cb13-321" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenate top 5 and 'Other'</span></span>
<span id="cb13-322"><a href="#cb13-322" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([top_5, other])</span>
<span id="cb13-323"><a href="#cb13-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-324"><a href="#cb13-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-325"><a href="#cb13-325" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [(<span class="dv">144</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">238</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">144</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">152</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">251</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">152</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb13-326"><a href="#cb13-326" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">193</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">193</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">193</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">193</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb13-327"><a href="#cb13-327" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">204</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">204</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">211</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">211</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">211</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb13-328"><a href="#cb13-328" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">220</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">220</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">220</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">230</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">230</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">250</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb13-329"><a href="#cb13-329" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">240</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">248</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">255</span><span class="op">/</span><span class="dv">255</span>), (<span class="dv">245</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">245</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">220</span><span class="op">/</span><span class="dv">255</span>), </span>
<span id="cb13-330"><a href="#cb13-330" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">250</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">250</span><span class="op">/</span><span class="dv">255</span>, <span class="dv">210</span><span class="op">/</span><span class="dv">255</span>)]</span>
<span id="cb13-331"><a href="#cb13-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-332"><a href="#cb13-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-333"><a href="#cb13-333" aria-hidden="true" tabindex="-1"></a><span class="co"># o block (250/255, 250/255, 210/255)</span></span>
<span id="cb13-334"><a href="#cb13-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-335"><a href="#cb13-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-336"><a href="#cb13-336" aria-hidden="true" tabindex="-1"></a>explode <span class="op">=</span> [<span class="fl">0.1</span> <span class="cf">if</span> df[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>][i] <span class="op">==</span> <span class="bu">max</span>(df[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>]) <span class="cf">else</span> <span class="dv">0</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(df))]</span>
<span id="cb13-337"><a href="#cb13-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-338"><a href="#cb13-338" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb13-339"><a href="#cb13-339" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb13-340"><a href="#cb13-340" aria-hidden="true" tabindex="-1"></a>plt.pie(df[<span class="st">'State Share of the Total Unauthorized Immigrant Population'</span>], labels<span class="op">=</span>df[<span class="st">'State'</span>], autopct<span class="op">=</span><span class="st">'</span><span class="sc">%1.1f%%</span><span class="st">'</span>, startangle<span class="op">=</span><span class="dv">140</span>, explode<span class="op">=</span>explode, colors<span class="op">=</span>colors)</span>
<span id="cb13-341"><a href="#cb13-341" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'equal'</span>)  <span class="co"># Equal aspect ratio ensures that pie is drawn as a circle.</span></span>
<span id="cb13-342"><a href="#cb13-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-343"><a href="#cb13-343" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb13-344"><a href="#cb13-344" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span>
<span id="cb13-345"><a href="#cb13-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-346"><a href="#cb13-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-347"><a href="#cb13-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-348"><a href="#cb13-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-349"><a href="#cb13-349" aria-hidden="true" tabindex="-1"></a>Under the assumption that these estimates are accurate, about 60 percent of the total illegal immigrant population settile in just 5 states. This is a huge disparity and can help to explain why some major city's are crying out for help over the immigration crisis and dealing with major homelessness issues.</span>
<span id="cb13-350"><a href="#cb13-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-351"><a href="#cb13-351" aria-hidden="true" tabindex="-1"></a>The distribution cannot be as skewed as it is. Citizens of the cities, the cities themselves and even the illegal immigrants will all suffer because of this large disparity. It would be a good idea for policy makers to attempt to more evenly distribute immigrants in order to lighten the burden on these 5 states as well as help these immigrants find more oppurtunity in less populated areas.</span>
<span id="cb13-352"><a href="#cb13-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-353"><a href="#cb13-353" aria-hidden="true" tabindex="-1"></a><span class="fu">## Unaccompanied Children Statistics</span></span>
<span id="cb13-354"><a href="#cb13-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-355"><a href="#cb13-355" aria-hidden="true" tabindex="-1"></a>Do unaccompied children get released to certain states at higher rates than others?</span>
<span id="cb13-356"><a href="#cb13-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-357"><a href="#cb13-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, warning=FALSE, error=FALSE}</span></span>
<span id="cb13-358"><a href="#cb13-358" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig5</span></span>
<span id="cb13-359"><a href="#cb13-359" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Top and Bottom 3 States by ratio of children taken in to illegal immigrants taken in"</span></span>
<span id="cb13-360"><a href="#cb13-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-361"><a href="#cb13-361" aria-hidden="true" tabindex="-1"></a>children_clean <span class="op">=</span> children.applymap(<span class="kw">lambda</span> x: x.replace(<span class="st">','</span>, <span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x)</span>
<span id="cb13-362"><a href="#cb13-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-363"><a href="#cb13-363" aria-hidden="true" tabindex="-1"></a>columns_to_float_2 <span class="op">=</span> [<span class="st">'FY 2014'</span>, <span class="st">'FY 2015'</span>, <span class="st">'FY 2016'</span>, <span class="st">'FY 2017'</span>, <span class="st">'FY 2018'</span>,</span>
<span id="cb13-364"><a href="#cb13-364" aria-hidden="true" tabindex="-1"></a>       <span class="st">'FY 2019'</span>, <span class="st">'FY 2020'</span>, <span class="st">'FY 2021'</span>, <span class="st">'FY 2022'</span>, <span class="st">'FY 2023 YTD*'</span>,</span>
<span id="cb13-365"><a href="#cb13-365" aria-hidden="true" tabindex="-1"></a>       <span class="st">'FY 2014 - 2023 YTD* Total'</span>]</span>
<span id="cb13-366"><a href="#cb13-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-367"><a href="#cb13-367" aria-hidden="true" tabindex="-1"></a>children_clean.replace(<span class="st">'-'</span>, <span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-368"><a href="#cb13-368" aria-hidden="true" tabindex="-1"></a>children_clean[columns_to_float_2] <span class="op">=</span> children_clean[columns_to_float_2].astype(<span class="bu">float</span>)</span>
<span id="cb13-369"><a href="#cb13-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-370"><a href="#cb13-370" aria-hidden="true" tabindex="-1"></a>merged_children <span class="op">=</span> pd.merge(children_clean, unauthorized_estimates[[<span class="st">'State'</span>,<span class="st">'Number of Unauthorized Immigrants'</span>]], on<span class="op">=</span><span class="st">'State'</span>, how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb13-371"><a href="#cb13-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-372"><a href="#cb13-372" aria-hidden="true" tabindex="-1"></a>merged_children[<span class="st">'Number of Unauthorized Immigrants'</span>] <span class="op">=</span> merged_children[<span class="st">'Number of Unauthorized Immigrants'</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb13-373"><a href="#cb13-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-374"><a href="#cb13-374" aria-hidden="true" tabindex="-1"></a>merged_children[<span class="st">'Ratio'</span>] <span class="op">=</span> (merged_children[<span class="st">'FY 2014 - 2023 YTD* Total'</span>] <span class="op">/</span> merged_children[<span class="st">'Number of Unauthorized Immigrants'</span>])</span>
<span id="cb13-375"><a href="#cb13-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-376"><a href="#cb13-376" aria-hidden="true" tabindex="-1"></a>merged_children.sort_values(by<span class="op">=</span>[<span class="st">'Ratio'</span>], ascending<span class="op">=</span><span class="va">False</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-377"><a href="#cb13-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-378"><a href="#cb13-378" aria-hidden="true" tabindex="-1"></a>top_3_children <span class="op">=</span> merged_children.head(<span class="dv">3</span>)</span>
<span id="cb13-379"><a href="#cb13-379" aria-hidden="true" tabindex="-1"></a>bottom_3_children <span class="op">=</span> merged_children.tail(<span class="dv">8</span>).iloc[<span class="op">-</span><span class="dv">7</span>:<span class="op">-</span><span class="dv">4</span>]</span>
<span id="cb13-380"><a href="#cb13-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-381"><a href="#cb13-381" aria-hidden="true" tabindex="-1"></a>children_graph <span class="op">=</span> pd.concat([top_3_children,bottom_3_children], axis<span class="op">=</span><span class="dv">0</span>, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-382"><a href="#cb13-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-383"><a href="#cb13-383" aria-hidden="true" tabindex="-1"></a>sns.barplot(children_graph, x<span class="op">=</span><span class="st">'State'</span>, y<span class="op">=</span><span class="st">'Ratio'</span>)</span>
<span id="cb13-384"><a href="#cb13-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-385"><a href="#cb13-385" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)<span class="op">;</span></span>
<span id="cb13-386"><a href="#cb13-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-387"><a href="#cb13-387" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-388"><a href="#cb13-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-389"><a href="#cb13-389" aria-hidden="true" tabindex="-1"></a>For this figure, I combined the number of illegal immigrants in each state as well as each states number of unnacompanied children that have been sent there.</span>
<span id="cb13-390"><a href="#cb13-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-391"><a href="#cb13-391" aria-hidden="true" tabindex="-1"></a>The top 3 states, Louisiana, South Dakota and Alabama all have low total immigrant populations. This is an interesting insight and possibly show cases that these states are more partial to taking in children.</span>
<span id="cb13-392"><a href="#cb13-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-393"><a href="#cb13-393" aria-hidden="true" tabindex="-1"></a>The bottom 3 states, Arizona, Vermont and New Mexico are also interesting because of how low their ratio is.</span>
<span id="cb13-394"><a href="#cb13-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-395"><a href="#cb13-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-396"><a href="#cb13-396" aria-hidden="true" tabindex="-1"></a><span class="fu">## Educational Attainment Statistics</span></span>
<span id="cb13-397"><a href="#cb13-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-398"><a href="#cb13-398" aria-hidden="true" tabindex="-1"></a>Are there differences in educational attainment of recently arrived immigrants based on what countries they come from? </span>
<span id="cb13-399"><a href="#cb13-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-400"><a href="#cb13-400" aria-hidden="true" tabindex="-1"></a><span class="in">```{python, warning=FALSE, error=FALSE}</span></span>
<span id="cb13-401"><a href="#cb13-401" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig6</span></span>
<span id="cb13-402"><a href="#cb13-402" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Top and bottom 10 countries by college degree attainment percentages"</span></span>
<span id="cb13-403"><a href="#cb13-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-404"><a href="#cb13-404" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'Some_college_degree'</span>] <span class="op">=</span> df_cleaned[<span class="st">'Some College or Associate</span><span class="ch">\'</span><span class="st">s Degree'</span>] <span class="op">+</span> df_cleaned[<span class="st">'Bachelor</span><span class="ch">\'</span><span class="st">s Degree or Higher'</span>]</span>
<span id="cb13-405"><a href="#cb13-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-406"><a href="#cb13-406" aria-hidden="true" tabindex="-1"></a>df_cleaned.sort_values(<span class="st">'Some_college_degree'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb13-407"><a href="#cb13-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-408"><a href="#cb13-408" aria-hidden="true" tabindex="-1"></a>df_cleaned.replace({<span class="st">'Korea'</span>:<span class="st">'South Korea'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-409"><a href="#cb13-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-410"><a href="#cb13-410" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to get continent from country name</span></span>
<span id="cb13-411"><a href="#cb13-411" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_continent(country):</span>
<span id="cb13-412"><a href="#cb13-412" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb13-413"><a href="#cb13-413" aria-hidden="true" tabindex="-1"></a>        country_code <span class="op">=</span> pc.country_name_to_country_alpha2(country, cn_name_format<span class="op">=</span><span class="st">"default"</span>)</span>
<span id="cb13-414"><a href="#cb13-414" aria-hidden="true" tabindex="-1"></a>        continent_code <span class="op">=</span> pc.country_alpha2_to_continent_code(country_code)</span>
<span id="cb13-415"><a href="#cb13-415" aria-hidden="true" tabindex="-1"></a>        continent_name <span class="op">=</span> pc.convert_continent_code_to_continent_name(continent_code)</span>
<span id="cb13-416"><a href="#cb13-416" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> continent_name</span>
<span id="cb13-417"><a href="#cb13-417" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb13-418"><a href="#cb13-418" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb13-419"><a href="#cb13-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-420"><a href="#cb13-420" aria-hidden="true" tabindex="-1"></a><span class="co"># Add continent column to DataFrame</span></span>
<span id="cb13-421"><a href="#cb13-421" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'Continent'</span>] <span class="op">=</span> df_cleaned[<span class="st">'Country'</span>].<span class="bu">apply</span>(get_continent)</span>
<span id="cb13-422"><a href="#cb13-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-423"><a href="#cb13-423" aria-hidden="true" tabindex="-1"></a>df_cleaned.sort_values(<span class="st">'Some_college_degree'</span>, ascending<span class="op">=</span><span class="va">False</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-424"><a href="#cb13-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-425"><a href="#cb13-425" aria-hidden="true" tabindex="-1"></a>education_top_5 <span class="op">=</span> df_cleaned.head(<span class="dv">10</span>)</span>
<span id="cb13-426"><a href="#cb13-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-427"><a href="#cb13-427" aria-hidden="true" tabindex="-1"></a>education_bot_5 <span class="op">=</span> df_cleaned.tail(<span class="dv">10</span>)</span>
<span id="cb13-428"><a href="#cb13-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-429"><a href="#cb13-429" aria-hidden="true" tabindex="-1"></a>frames <span class="op">=</span> (education_top_5, education_bot_5)</span>
<span id="cb13-430"><a href="#cb13-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-431"><a href="#cb13-431" aria-hidden="true" tabindex="-1"></a>education_plot <span class="op">=</span> pd.concat(frames)</span>
<span id="cb13-432"><a href="#cb13-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-433"><a href="#cb13-433" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the figure size</span></span>
<span id="cb13-434"><a href="#cb13-434" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb13-435"><a href="#cb13-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-436"><a href="#cb13-436" aria-hidden="true" tabindex="-1"></a><span class="co"># Define colors for each continent</span></span>
<span id="cb13-437"><a href="#cb13-437" aria-hidden="true" tabindex="-1"></a>continent_colors <span class="op">=</span> {<span class="st">'Asia'</span>: <span class="st">'yellowgreen'</span>, <span class="st">'Europe'</span>: <span class="st">'teal'</span>, <span class="st">'Africa'</span>: <span class="st">'mediumblue'</span>, <span class="st">'North America'</span>: <span class="st">'gold'</span>, <span class="st">'South America'</span>: <span class="st">'blueviolet'</span>, <span class="st">'Oceania'</span>: <span class="st">'brown'</span>}</span>
<span id="cb13-438"><a href="#cb13-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-439"><a href="#cb13-439" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the bar plot</span></span>
<span id="cb13-440"><a href="#cb13-440" aria-hidden="true" tabindex="-1"></a>bar_plot <span class="op">=</span> plt.barh(education_plot[<span class="st">'Country'</span>], education_plot[<span class="st">'Some_college_degree'</span>], color<span class="op">=</span>[continent_colors[cont] <span class="cf">for</span> cont <span class="kw">in</span> education_plot[<span class="st">'Continent'</span>]])</span>
<span id="cb13-441"><a href="#cb13-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-442"><a href="#cb13-442" aria-hidden="true" tabindex="-1"></a><span class="co"># Set xlabel</span></span>
<span id="cb13-443"><a href="#cb13-443" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Percentage of Immigrants that Attained College Degree'</span>)</span>
<span id="cb13-444"><a href="#cb13-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-445"><a href="#cb13-445" aria-hidden="true" tabindex="-1"></a><span class="co"># Add legend for continent colors</span></span>
<span id="cb13-446"><a href="#cb13-446" aria-hidden="true" tabindex="-1"></a>plt.legend(handles<span class="op">=</span>[plt.Rectangle((<span class="dv">0</span>,<span class="dv">0</span>),<span class="dv">1</span>,<span class="dv">1</span>, color<span class="op">=</span>continent_colors[cont], label<span class="op">=</span>cont) <span class="cf">for</span> cont <span class="kw">in</span> education_plot[<span class="st">'Continent'</span>].unique()])</span>
<span id="cb13-447"><a href="#cb13-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-448"><a href="#cb13-448" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb13-449"><a href="#cb13-449" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span></span>
<span id="cb13-450"><a href="#cb13-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-451"><a href="#cb13-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb13-452"><a href="#cb13-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-453"><a href="#cb13-453" aria-hidden="true" tabindex="-1"></a>When looking at the countries with the highest percentage of immigrants attaining a college degree in the U.S., we can see that none of those countries are in either North or South America. In contrast, 90 percent of countries with the lowest percentage are from the Americas.</span>
<span id="cb13-454"><a href="#cb13-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-455"><a href="#cb13-455" aria-hidden="true" tabindex="-1"></a>I believe this points out a big problem. Immigrants coming through our southern border have a signifigantly lower chance of getting a college degree in comparison to immigrants coming from countries in Europe and Asia. I think policy makers should use this data and take some steps to try and bridge this gap in order to create more oppurtunity for under-represented immigrant groups in our higher education system.</span>
<span id="cb13-456"><a href="#cb13-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-457"><a href="#cb13-457" aria-hidden="true" tabindex="-1"></a><span class="fu"># Future Work</span></span>
<span id="cb13-458"><a href="#cb13-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-459"><a href="#cb13-459" aria-hidden="true" tabindex="-1"></a>Some ideas I had to continue this project but did not have time for are:</span>
<span id="cb13-460"><a href="#cb13-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-461"><a href="#cb13-461" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>To build a time series model to predict future legal and illegal immigration trends.</span>
<span id="cb13-462"><a href="#cb13-462" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Explore data pertaining to immigrants in the U.S. workforce.</span>
<span id="cb13-463"><a href="#cb13-463" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Explore correlation between immigration trends and which political parties were in office.</span>
<span id="cb13-464"><a href="#cb13-464" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Compare immigration trends and economic data year over year.</span>
<span id="cb13-465"><a href="#cb13-465" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Analyze deporation data.</span>
<span id="cb13-466"><a href="#cb13-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-467"><a href="#cb13-467" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusions</span></span>
<span id="cb13-468"><a href="#cb13-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-469"><a href="#cb13-469" aria-hidden="true" tabindex="-1"></a>I hope that you learned something new while reading through my blog post!</span>
<span id="cb13-470"><a href="#cb13-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-471"><a href="#cb13-471" aria-hidden="true" tabindex="-1"></a>Here are the key insights from this project:</span>
<span id="cb13-472"><a href="#cb13-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-473"><a href="#cb13-473" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The number of green cards being issued is on the rise.</span>
<span id="cb13-474"><a href="#cb13-474" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Largest immigrant populations along sothern border with hotspots in CA, FL, NY and NJ.</span>
<span id="cb13-475"><a href="#cb13-475" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>In recent years, we are declaring a need for way more refugees than we are actually taking in.</span>
<span id="cb13-476"><a href="#cb13-476" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>60% of estimated illegal immigrants settle in just 5 states (CA, TX, NY, FL, NJ).</span>
<span id="cb13-477"><a href="#cb13-477" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Some countries show evidence of possible favoritism toward child immigrants.</span>
<span id="cb13-478"><a href="#cb13-478" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Huge disparities between immigrant's countries of origin and their success in U.S. higher education system.</span>
<span id="cb13-479"><a href="#cb13-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-480"><a href="#cb13-480" aria-hidden="true" tabindex="-1"></a>U.S. immigration is one the strongest gateways for people around the world to find a better life and oppurtunity. Making sure that the correct policies are put in place based on the current state of immigration will help to ensure that the U.S. can always except and integrate immigrants into the country without the current citizens experienceing diminishing returns. It is important to conduct ana analysis like this one so that the current landscape can be understood and better changes can be made to the system, for U.S. citizens and incoming immigrants alike.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>